{% extends "base.html" %}

{% block content %}
<section class="auth">
  <div class="panel auth-card">
    <h2>Admin Sign In</h2>
    {% if request.query_params.get('error') %}
      <div class="alert">
        {% if request.query_params.get('error') == 'oauth_denied' %}
          OAuth login not allowed for this account.
        {% elif request.query_params.get('error') == 'oauth' %}
          OAuth login failed. Please try again.
        {% else %}
          Invalid credentials. Try again.
        {% endif %}
      </div>
    {% endif %}
    <form method="post" action="/admin/login" class="auth-form">
      <label>
        <span>Username</span>
        <input type="text" name="username" required />
      </label>
      <label>
        <span>Password</span>
        <input type="password" name="password" required />
      </label>
      <button class="btn" type="submit">Sign in</button>
    </form>
    {% if setup_available %}
      <div class="auth-links">
        <p class="auth-note">Need an admin account? <a href="/admin/setup">Create one now</a>.</p>
      </div>
    {% endif %}

    {% if oauth_google_enabled or oauth_discord_enabled or oauth_steam_enabled %}
      <div class="oauth">
        <div class="oauth-label">Continue with</div>
        <div class="oauth-buttons">
          {% if oauth_google_enabled %}
            <a class="btn oauth-btn google" href="/auth/google/login">Google</a>
          {% endif %}
          {% if oauth_discord_enabled %}
            <a class="btn oauth-btn discord" href="/auth/discord/login">Discord</a>
          {% endif %}
          {% if oauth_steam_enabled %}
            <a class="btn oauth-btn steam" href="/auth/steam/login">Steam</a>
          {% endif %}
        </div>
      </div>
    {% endif %}
  </div>
</section>
{% endblock %}
